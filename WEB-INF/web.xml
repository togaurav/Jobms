<?xml version="1.0" encoding="UTF-8"?>
<web-app id="rigel" version="2.4"
 xmlns="http://java.sun.com/xml/ns/j2ee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
 <display-name>rigel</display-name>
 <context-param>
  <param-name>log4jConfigLocation</param-name>
  <param-value>/WEB-INF/classes/log4j.properties</param-value>
 </context-param>
 <context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>classpath*:applicationContext.xml</param-value>
 </context-param>
 

 
 <filter>
  <filter-name>struts-cleanup</filter-name>
  <filter-class>org.apache.struts2.dispatcher.ActionContextCleanUp</filter-class>
 </filter>
 <filter>
  <filter-name>struts2</filter-name>
  <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
 </filter>
 <filter>
    <filter-name>encodingFilter</filter-name>
    <filter-class>com.baidu.rigel.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>requestEncoding</param-name>
        <param-value>utf-8</param-value>
    </init-param>
    <init-param>
        <param-name>responseEncoding</param-name>
        <param-value>utf-8</param-value>
    </init-param>
    <init-param>
        <param-name>isSetContentType</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter>
    <filter-name>casCheckFilter</filter-name>
    <filter-class>com.baidu.rigel.servicegateway.usercenter.filter.CasFilter</filter-class>
    <init-param>
        <param-name>appid</param-name>
        <param-value>2</param-value>
    </init-param>
    <init-param>
    	<param-name>appkey</param-name>
    	<param-value>test.baidu.com</param-value>
    </init-param>
    
    <init-param>
    	<param-name>casServers</param-name>
    	<param-value>10.81.12.139:3232</param-value>
    </init-param>
    <init-param>
    	<param-name>casTimeout</param-name>
    	<param-value>500</param-value>
    </init-param>
    
    <init-param>
        <param-name>interval</param-name>
        <param-value>60</param-value>
    </init-param>
    
    <init-param>
        <param-name>cookiedomain</param-name>
        <param-value>perform.baidu.com</param-value>
    </init-param>
    <init-param>
        <param-name>cookiepath</param-name>
        <param-value>/</param-value>
    </init-param>
    
    <init-param>
        <param-name>loginUrl</param-name>
        <param-value>http://casqa.baidu.com:8477/?tpl=crmsale</param-value>
    </init-param>
    <init-param>
        <param-name>jumpUrl</param-name>
        <param-value>http://casqa.baidu.com:8477/?action=check&amp;appid=</param-value>
    </init-param>
    
    <init-param>
        <param-name>excludePath</param-name>
        <param-value></param-value>
    </init-param>
</filter>

<filter>
    <filter-name>userInfoCheckFilter</filter-name>
    <filter-class>com.baidu.rigel.web.filter.UserInfoCheckFilter</filter-class>
    <!-- 该模块使用的appid -->
    <init-param>
        <param-name>appid</param-name>
        <param-value>2</param-value>
    </init-param>
    <!-- 登陆url -->
    <init-param>
        <param-name>loginPagePath</param-name>
        <param-value>http://casqa.baidu.com:8477/?action=logout&amp;next=login&amp;tpl=crmsale&amp;appid=</param-value>
    </init-param>
    <!-- 该模块使用的rootTag -->
    <init-param>
        <param-name>rootTag</param-name>
        <param-value>saletree,supporttree</param-value>
    </init-param>
    <!-- 错误页面url -->
    <init-param>
        <param-name>errorPagePath</param-name>
        <param-value>http://casqa.baidu.com:8477/?action=logout&amp;next=login&amp;tpl=crmsale</param-value>
    </init-param>
    <!-- 不需要验证的path -->
    <init-param>
        <param-name>excludePath</param-name>
        <param-value></param-value>
    </init-param>
    <!-- userMgr bean id -->
    <init-param>
        <param-name>userMgrBeanName</param-name>
        <param-value>userMgr</param-value>
    </init-param>
</filter>
<filter>
    <filter-name>authCheckFilter</filter-name>
    <filter-class>com.baidu.rigel.web.filter.AuthCheckFilter</filter-class>
    <!-- 错误页面url -->
    <init-param>
        <param-name>errorPagePath</param-name>
        <param-value>/ht-sys/forbiddenAction.action</param-value>
    </init-param>
    <!-- 不需要验证的path 
    <init-param>
        <param-name>excludePath</param-name>
        <param-value>/ht-sys/portal/*</param-value>
    </init-param>
    -->
    <!-- 应用的context -->
    <init-param>
        <param-name>context</param-name>
        <param-value>/ht-report</param-value>
    </init-param>
</filter>
	<filter-mapping>
		<filter-name>encodingFilter</filter-name>
		<url-pattern>*.action</url-pattern>
	</filter-mapping>
 <filter-mapping>
   <filter-name>casCheckFilter</filter-name>
   <url-pattern>*.action</url-pattern>
 </filter-mapping>
 <filter-mapping>
   <filter-name>userInfoCheckFilter</filter-name>
   <url-pattern>*.action</url-pattern>
 </filter-mapping>

 <filter-mapping>
   <filter-name>authCheckFilter</filter-name>
   <url-pattern>*.action</url-pattern>
 </filter-mapping>

 <filter-mapping>
  <filter-name>struts-cleanup</filter-name>
  <url-pattern>/*</url-pattern>
 </filter-mapping>
 <filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
 </filter-mapping>

 <listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
 </listener>
 <!-- 
 <listener>
  <listener-class>com.baidu.rigel.util.web.InitSystemListener</listener-class>
 
 </listener>
   -->
   
 <error-page>
    <error-code>404</error-code>
    <location>/notfound.html</location>
 </error-page>
 <error-page>
    <error-code>500</error-code>
    <location>/systembusy.html</location>
 </error-page>
 
 <jsp-config>
  <taglib>
   <taglib-uri>/mypage</taglib-uri>
   <taglib-location>/WEB-INF/getPageWithParamUrl.tld</taglib-location>
  </taglib>
 </jsp-config>
 <login-config>
  <auth-method>BASIC</auth-method>
 </login-config>
</web-app>
